<div class="projectsMenu">
  <button mat-flat-button color="primary" (click)="openProjectDialog('')">
    New Project
  </button>

  <form [formGroup]="filterForm">
    <mat-form-field appearance="outline">
      <mat-label>Search by project name</mat-label>
      <input
        matInput
        type="text"
        name="projectName"
        id="projectName"
        formControlName="projectName"
        placeholder="Search..."
      />
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </form>
</div>

<div
  (click)="fetchAllRepos()"
  [ngClass]="{
    all: true,
    selectedProject: selectedProject === 'all'
  }"
>
  All Repos
</div>

<div *ngIf="filteredProjectList.length > 0">
  <div
    *ngFor="let project of filteredProjectList"
    [ngClass]="{
      project: true,
      selectedProject: selectedProject === project._id
    }"
    (click)="fetchProjectRepos(project._id)"
  >
    <div class="flex justify-between">
      <div class="title">
        {{ project.name }}
      </div>
      <button
        mat-icon-button
        aria-label="project actions"
        matTooltip="Actions"
        [matMenuTriggerFor]="projectActionsMenu"
        (click)="$event.stopPropagation()"
      >
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #projectActionsMenu>
        <button
          mat-menu-item
          matTooltip="Edit"
          (click)="openProjectDialog(project._id)"
        >
          <span>Edit</span>
        </button>
        <button mat-menu-item matTooltip="Delete" class="flex justify-between">
          <span class="textWarn">Delete</span>
        </button>
      </mat-menu>
    </div>
    <div>
      <a
        *ngIf="project.url"
        class="link"
        href="{{ project.url }}"
        target="_blank"
      >
        Open
      </a>
    </div>
  </div>
</div>

<div *ngIf="filteredProjectList.length === 0" class="emptyList">
  No Projects
</div>
